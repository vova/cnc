STATIONS = [
          { :id => 0, :color => 'red', :coordinates => { :lat => 50.464853086055115, :lng => 30.354784727096558100 }, :name => "Akademgorodok" },
          { :id => 1, :color => 'red', :coordinates => { :lat => 50.45618571221397, :lng => 30.363775491714478 }, :name => "Zhitomirskaya" },
          { :id => 2, :color => 'red', :coordinates => { :lat => 50.457620139071935, :lng => 30.39191722869873 }, :name => "Svyatoshin" },
          { :id => 3, :color => 'red', :coordinates => { :lat => 50.45892474668018, :lng => 30.404738187789917 }, :name => "Nivki" },
          { :id => 4, :color => 'red', :coordinates => { :lat => 50.458726667213625, :lng => 30.420563220977783 }, :name => "Beresteyskaya" },
          { :id => 5, :color => 'red', :coordinates => { :lat => 50.45487419816461, :lng => 30.445207357406616 }, :name => "Shulyavskaya" },
          { :id => 6, :color => 'red', :coordinates => { :lat => 50.450795976863944, :lng => 30.466493368148804 }, :name => "Politehnicheskij Institut" },
          { :id => 7, :color => 'red', :coordinates => { :lat => 50.44157940487428, :lng => 30.488412380218506 }, :name => "Vokzalnaya" },
          { :id => 8, :color => 'red', :coordinates => { :lat => 50.44407331720806, :lng => 30.505846738815308 }, :name => "Universitet" },
          { :id => 9, :color => 'red', :coordinates => { :lat => 50.44537146613966, :lng => 30.518646240234375 }, :name => "Teatralnaya", :connected_to => 22 },
          { :id => 10, :color => 'red', :coordinates => { :lat => 50.447427934450346, :lng => 30.525619983673096 }, :name => "Khreshyatik", :connected_to => 38 },
          { :id => 11, :color => 'red', :coordinates => { :lat => 50.44431928500311, :lng => 30.545361042022705 }, :name => "Arsenalnaya" },
          { :id => 12, :color => 'red', :coordinates => { :lat => 50.440984946100784, :lng => 30.558536052703857 }, :name => "Dnepr" },
          { :id => 13, :color => 'red', :coordinates => { :lat => 50.44611617761047, :lng => 30.5769681930542 }, :name => "Gidropark" },
          { :id => 14, :color => 'red', :coordinates => { :lat => 50.45173188117417, :lng => 30.59817910194397 }, :name => "Levoberezhnaya" },
          { :id => 15, :color => 'red', :coordinates => { :lat => 50.45643844772193, :lng => 30.61386466026306 }, :name => "Darnitsa" },
          { :id => 16, :color => 'red', :coordinates => { :lat => 50.459717056251485, :lng => 30.6303870677948 }, :name => "Chernigovskaya" },
          { :id => 17, :color => 'red', :coordinates => { :lat => 50.46434087407976, :lng => 30.644441843032837 }, :name => "Lesnaya" },
          { :id => 19, :color => 'green', :coordinates => { :lat => 50.47632518035787, :lng => 30.43088436126709 }, :name => "Syrets" },
          { :id => 20, :color => 'green', :coordinates => { :lat => 50.473402792003135, :lng => 30.448222160339355 }, :name => "Dorogozhichi" },
          { :id => 21, :color => 'green', :coordinates => { :lat => 50.461711431936614, :lng => 30.481910705566406 }, :name => "Lukyanovskaya" },
          { :id => 22, :color => 'green', :coordinates => { :lat => 50.448295586962324, :lng => 30.513582229614258 }, :name => "Zolotie Vorota", :connected_to => 9 },
          { :id => 23, :color => 'green', :coordinates => { :lat => 50.43818337321576, :lng => 30.52074909210205 }, :name => "Palatz Sporta", :connected_to => 37 },
          { :id => 24, :color => 'green', :coordinates => { :lat => 50.436898694100606, :lng => 30.53173542022705 }, :name => "Klovskaya" },
          { :id => 25, :color => 'green', :coordinates => { :lat => 50.427522214219664, :lng => 30.53898811340332 }, :name => "Pecherskaya" },
          { :id => 26, :color => 'green', :coordinates => { :lat => 50.41814387730614, :lng => 30.54495334625244 }, :name => "Druzhby Narodov" },
          { :id => 27, :color => 'green', :coordinates => { :lat => 50.40113235969953, :lng => 30.56169033050537 }, :name => "Vydubichi " },
          { :id => 28, :color => 'green', :coordinates => { :lat => 50.394183777852554, :lng => 30.60439109802246 }, :name => "Slavutich" },
          { :id => 29, :color => 'green', :coordinates => { :lat => 50.396126200540024, :lng => 30.616321563720703 }, :name => "Osokorki" },
          { :id => 30, :color => 'green', :coordinates => { :lat => 50.39787704856195, :lng => 30.633788108825684 }, :name => "Poznyaki" },
          { :id => 31, :color => 'green', :coordinates => { :lat => 50.400557909273466, :lng => 30.651683807373047 }, :name => "Harkovskaya" },
          { :id => 32, :color => 'green', :coordinates => { :lat => 50.40315655808972, :lng => 30.670480728149414 }, :name => "Virlitsa" },
          { :id => 33, :color => 'green', :coordinates => { :lat => 50.403320678494595, :lng => 30.683012008666992 }, :name => "Borisposkaya" },
          { :id => 34, :color => 'blue', :coordinates => { :lat => 50.41286603742956, :lng => 30.524611473083496 }, :name => "Lybedskaya" },
          { :id => 35, :color => 'blue', :coordinates => { :lat => 50.420495471498114, :lng => 30.520920753479004 }, :name => "Pa:latz Ukraina" },
          { :id => 36, :color => 'blue', :coordinates => { :lat => 50.432142344542534, :lng => 30.516586303710938 }, :name => "Respublikanskij Standion" },
          { :id => 37, :color => 'blue', :coordinates => { :lat => 50.43957734728102, :lng => 30.51680088043213 }, :name => "Ploshyad Lva Tolstogo", :connected_to => 23 },
          { :id => 38, :color => 'blue', :coordinates => { :lat => 50.4511102241713, :lng => 30.522465705871582 }, :name => "Majdan Nezalejnosti", :connected_to => 10 },
          { :id => 39, :color => 'blue', :coordinates => { :lat => 50.45892474668018, :lng => 30.524954795837402 }, :name => "Pochtovaya Ploshyad" },
          { :id => 40, :color => 'blue', :coordinates => { :lat => 50.46586383474418, :lng => 30.515213012695312 }, :name => "Kontraktovaya Ploshyad" },
          { :id => 41, :color => 'blue', :coordinates => { :lat => 50.47329354033729, :lng => 30.505084991455078 }, :name => "Tarasa Shevchenko" },
          { :id => 42, :color => 'blue', :coordinates => { :lat => 50.486046966428134, :lng => 30.497918128967285 }, :name => "Petrovka" },
          { :id => 43, :color => 'blue', :coordinates => { :lat => 50.50196343778538, :lng => 30.49954891204834 }, :name => "Obolon" },
          { :id => 44, :color => 'blue', :coordinates => { :lat => 50.51222576184578, :lng => 30.49851894378662 }, :name => "Minskaya" },
          { :id => 45, :color => 'blue', :coordinates => { :lat => 50.52248585562935, :lng => 30.498991012573242 }, :name => "Geroev Dnepra" }
        ]

module Stations

def self.get_distance_between point1, point2
	radius = 6371; # km
	dLat = toRad(point2[:lat]-point1[:lat]);
	dLon = toRad(point2[:lng]-point1[:lng]); 
	a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(toRad(point1[:lat])) * Math.cos(toRad(point2[:lat])) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
	c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
	radius * c;
end

def self.toRad degrees
    degrees * (Math::PI / 180)
end

def self.get_line color
 line = STATIONS.select do |st|
	color==st[:color]
 end
 
 the_start = line.shift
 distance=0
 res = line.map do |st| 
	distance+= get_distance_between(the_start[:coordinates], st[:coordinates])
	the_start = st
	{:id=>st[:id], :distance=>distance }
 end
 res=[{:id=>the_start[:id], :distance=>0}] + res
end

end
